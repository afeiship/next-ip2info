{"version":3,"sources":["next-ip2info.js"],"names":[],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"next-ip2info.js","sourcesContent":["(function () {\n  var global = global || this || window || Function('return this')();\n  var nx = global.nx || require('@feizheng/next-js-core2');\n  var fetch = require('node-fetch');\n  var iconvLite = require('iconv-lite');\n  var RETURN_BUFFER = function (res) { return res.buffer(); };\n  var INFO_RE = /ShowIPAddr\\('(.*?)','(.*?)','(.*?) (.*?) '\\);/;\n\n  var DEFAULT_OPTIONS = { context: global };\n\n  nx.ip2info = function (inIp) {\n    var url = 'http://ipaddr.cz88.net/data.php?ip=' + inIp;\n    return new Promise(function (resolve) {\n      fetch(url).then(RETURN_BUFFER).then(function (res) {\n        var resStr = iconvLite.decode(res, 'gbk');\n        var matched = INFO_RE.exec(resStr);\n        resolve({\n          ip: matched[1],\n          location: matched[2],\n          os: matched[3],\n          browser: matched[4],\n        });\n      })\n    })\n  };\n\n  if (typeof module !== 'undefined' && module.exports) {\n    module.exports = nx.ip2info;\n  }\n})();\n"]}